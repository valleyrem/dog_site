{% load static %}
{% load woof_tags %}
{% load filters %}
{% load compress %}

<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NJCSC592');</script>
    <!-- End Google Tag Manager -->

    <!-- Meta -->
    <meta name="description" content="Woof Dogs. Website about dog breeds categorizes by American Kennel Club (AKC).">
    <meta name="google-site-verification" content="HPWwmIldc9XdWosMjDEekOApMJHKtsHUea5lkzhx4u0">
    <title>{{ title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Styles -->
    {% compress css %}
    {% block styles %}{% endblock %}
    <link rel="stylesheet" href="{% static 'woof/css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'woof/css/mobile.css' %}">
    <link rel="stylesheet" href="{% static 'woof/css/dark.css' %}">
    {% endcompress %}

    <!-- Icons -->
    <link rel="preload"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
          as="style"
          onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    </noscript>

    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous"
    />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">

    <!-- Global scripts -->
    <script src="{% static 'woof/js/scripts.js' %}" defer></script>
    <script src="https://unpkg.com/htmx.org@1.8.5" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" defer></script>

</head>

<body class="layout-root is-hidden">

<!-- Theme switch script -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const themeIcon = document.querySelector('#theme-switch__icon');
        const currentTheme = localStorage.getItem('theme') || 'light';

        document.body.classList.add(currentTheme + '-theme');
        updateIcon(currentTheme);
        document.body.classList.remove('is-hidden');

        document.querySelector('#theme-switch').addEventListener('click', function() {
            let newTheme = document.body.classList.contains('light-theme') ? 'dark' : 'light';
            document.body.classList.remove('light-theme', 'dark-theme');
            document.body.classList.add(newTheme + '-theme');
            localStorage.setItem('theme', newTheme);
            updateIcon(newTheme);
        });

        function updateIcon(theme) {
            if (theme === 'dark') {
                themeIcon.classList.remove('bi-toggle-off');
                themeIcon.classList.add('bi-toggle-on');
            } else {
                themeIcon.classList.remove('bi-toggle-on');
                themeIcon.classList.add('bi-toggle-off');
            }
        }
    });
</script>

<!-- Header -->
{% block mainmenu %}
<header class="site-header">
    <ul class="nav-main">

        <!-- Left navigation -->
        <li class="nav-left">
            <ul class="nav-left-list">
                {% for m in menu %}
                    <li class="{% if request.resolver_match.url_name == m.url_name %}is-active{% endif %}">
                        <a href="{% url m.url_name %}" title="{{ m.title }}">{{ m.title }}</a>
                    </li>
                {% endfor %}
            </ul>
        </li>

        <!-- Logo -->
        <li class="nav-logo">
            <a href="{% url 'home' %}">
                <div class="logo-text" translate="no" title="Woof Dogs">
                    <span class="logo-letter logo-letter--primary">Woof</span>
                    <span class="logo-letter logo-letter--secondary">Dogs</span>
                </div>
            </a>
        </li>

        <!-- Theme button -->
        <li class="nav-right">
            <button id="theme-switch" title="Change theme">
                <i id="theme-switch__icon" class="bi"></i>
            </button>
        </li>

    </ul>
</header>
{% endblock %}

<!-- Layout -->
<div class="layout-container">

    <!-- Sidebar -->
    {% if not is_home %}
    <aside class="sidebar-nav">
        <div class="mobile-menu">
            <ul class="mobile-menu__list">
                {% for category in cats %}
                    {% if category.pk != 10 %}
                        <li class="mobile-menu__item {% if category.pk == cat_selected %}is-active{% endif %}">
                            <a href="{{ category.get_absolute_url }}" title="{{ category.name }}">{{ category.name }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </aside>
    {% endif %}

    <!-- Main content -->
    <main class="layout-content">
        {% block content %}{% endblock %}
    </main>

</div>

<!-- Footer -->
<footer class="site-footer">

    <!-- Scroll to top -->
    <button id="scroll-top-button" title="back to top">
        <i class="bi bi-arrow-up"></i> back to top
    </button>

    <!-- Copyright -->
    <div class="footer-block">
        <p class="footer-copyright">
            Â© <span id="current-year"></span> Woof Dogs.<br>
            All rights reserved for original content.<br>
            This website is non-commercial and created for informational purposes only.<br>
            Images are used under their respective licenses with attribution.
        </p>
    </div>

    <!-- Current year script -->
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>

    <!-- Legal links -->
    <div class="footer-block">
        <p class="footer-links">
            <a href="{% url 'privacy-policy' %}" title="Privacy Policy">Privacy Policy</a>
            <a href="{% url 'cookie-policy' %}" title="Cookie Policy">Cookie Policy</a>
            <a href="{% url 'terms-of-use' %}" title="Terms of Use">Terms of Use</a>
        </p>
    </div>

</footer>

<!-- GTM noscript -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJCSC592"
            height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
</noscript>

<!-- Scroll to top script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const scrollBtn = document.getElementById('scroll-top-button');

    scrollBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
});
</script>

</body>
</html>
